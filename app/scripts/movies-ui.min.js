/*! movies-ui 2018-04-02 */

var app=angular.module("movies",["ngResource"]);app.value("serviceUris",{moviesDataServiceUrl:"localhost:3456/fake-service/moviedatahub/movies"}),app.controller("MoviesListController",["$scope","moviesDataService",function(e,t){var a=this;a.headings=[{title:"ID",name:"id"},{title:"Title",name:"movietitle"},{title:"Director",name:"director"},{title:"Category",name:"category"},{title:"Rank",name:"rank"},{title:"Value ($m)",name:"value"},{title:"Year",name:"year"},{title:"Company",name:"company"}],a.listCriteria={listStart:0,itemsCount:10,sortName:"",sortMode:""},a.pageCount=0,a.currentPage=0,a.moviesListData={},a.loadMoviesPageCount=function(){t.getMoviesTotalCount().then(function(e){var t=e.moviesTotalCount;a.pageCount=Math.floor(t/a.listCriteria.itemsCount)+1,console.log(a.pageCount)},function(){})},a.moviesListDataIsEmpty=function(){return void 0===a.moviesListData||void 0===a.moviesListData.moviesList},a.loadMoviesListData=function(){t.getMoviesListData(a.listCriteria).then(function(e){a.moviesListData=e},function(){})},a.isSortAscending=function(e){return a.headings[e].name==a.listCriteria.sortName&&"asc"===a.listCriteria.sortMode},a.isSortDescending=function(e){return a.headings[e].name==a.listCriteria.sortName&&"desc"===a.listCriteria.sortMode},a.switchHeaderSort=function(e){e<0||e>=a.headings.length||(a.headings[e].name!=a.listCriteria.sortName&&(a.listCriteria.sortName="",a.listCriteria.sortMode=""),""===a.listCriteria.sortMode?(a.listCriteria.sortMode="desc",a.listCriteria.sortName=a.headings[e].name):"desc"===a.listCriteria.sortMode?a.listCriteria.sortMode="asc":(a.listCriteria.sortMode="",a.listCriteria.sortName=""),a.resetPage(),a.loadMoviesListData())},a.resetPage=function(){a.currentPage=0,a.listCriteria.listStart=0},a.changePage=function(e){var t=e>0?1:-1;a.currentPage+=t,a.listCriteria.listStart+=a.listCriteria.itemsCount*t,a.loadMoviesListData()},a.loadMoviesPageCount(),a.loadMoviesListData()}]);var moviesListFakeData={title:"Movies List Data",moviesList:[{id:1,rank:1,rankChange:1,movietitle:"Star Wars IV",director:"George Lucas",category:"Sci-fi",country:"USA",year:1977,date:"1977-12-27",value:775,company:"Lucas Films"},{id:2,rank:2,rankChange:1,movietitle:"ET",director:"Steven Spielberg",category:"Sci-fi",country:"USA",year:1982,date:"1982-12-090",value:792,company:"Universal"},{id:3,rank:3,rankChange:1,movietitle:"Gold Finger",director:"Guy Hamilton",category:"Action",country:"UK",year:1964,date:"1964-09-17",value:125,company:"Eon"},{id:4,rank:4,rankChange:1,movietitle:"Blade Runner",director:"Ridley Scott",category:"Sci-fi",country:"UK",year:1982,date:"1982-09-09",value:34,company:"Warner Bros"},{id:5,rank:5,rankChange:1,movietitle:"The Incredibles",director:"Brad Bird",category:"Family",country:"USA",year:2004,date:"2004-10-27",value:633,company:"Disney"},{id:6,rank:6,rankChange:1,movietitle:"Zulu",director:"Cy Enfield",category:"Action",country:"UK",year:1964,date:"1964-01-22",value:8,company:"Paramount"},{id:7,rank:7,rankChange:1,movietitle:"Longest Day",director:"Various",category:"War",country:"USA",year:1962,date:"1962-10-23",value:50,company:"20th Century Fox"},{id:8,rank:8,rankChange:1,movietitle:"Battle of Britain",director:"Guy Hamilton",category:"War",country:"UK",year:1969,date:"1969-09-16",value:13,company:"United Artists"},{id:9,rank:9,rankChange:1,movietitle:"Ferris Buleller's Day Off",director:"John Hughes",category:"Comedy",country:"Global",year:1987,date:"1987-02-20",value:70,company:"Paramount"},{id:10,rank:10,rankChange:1,movietitle:"Ghostbusters",director:"Ivan Reitman",category:"Comedy",country:"USA",year:1984,date:"1984-06-07",value:295,company:"Columbia Pictures"},{id:11,rank:1,rankChange:1,movietitle:"Star Wars IV",director:"George Lucas",category:"Sci-fi",country:"USA",year:1977,date:"1977-12-27",value:775,company:"Lucas Films"},{id:12,rank:2,rankChange:1,movietitle:"ET",director:"Steven Spielberg",category:"Sci-fi",country:"USA",year:1982,date:"1982-12-090",value:792,company:"Universal"},{id:13,rank:3,rankChange:1,movietitle:"Gold Finger",director:"Guy Hamilton",category:"Action",country:"UK",year:1964,date:"1964-09-17",value:125,company:"Eon"},{id:14,rank:4,rankChange:1,movietitle:"Blade Runner",director:"Ridley Scott",category:"Sci-fi",country:"UK",year:1982,date:"1982-09-09",value:34,company:"Warner Bros"},{id:15,rank:5,rankChange:1,movietitle:"The Incredibles",director:"Brad Bird",category:"Family",country:"USA",year:2004,date:"2004-10-27",value:633,company:"Disney"},{id:16,rank:6,rankChange:1,movietitle:"Zulu",director:"Cy Enfield",category:"Action",country:"UK",year:1964,date:"1964-01-22",value:8,company:"Paramount"},{id:17,rank:7,rankChange:1,movietitle:"Longest Day",director:"Various",category:"War",country:"USA",year:1962,date:"1962-10-23",value:50,company:"20th Century Fox"},{id:18,rank:8,rankChange:1,movietitle:"Battle of Britain",director:"Guy Hamilton",category:"War",country:"UK",year:1969,date:"1969-09-16",value:13,company:"United Artists"},{id:19,rank:9,rankChange:1,movietitle:"Ferris Buleller's Day Off",director:"John Hughes",category:"Comedy",country:"Global",year:1987,date:"1987-02-20",value:70,company:"Paramount"},{id:20,rank:10,rankChange:1,movietitle:"Ghostbusters",director:"Ivan Reitman",category:"Comedy",country:"USA",year:1984,date:"1984-06-07",value:295,company:"Columbia Pictures"},{id:21,rank:5,rankChange:1,movietitle:"The Incredibles",director:"Brad Bird",category:"Family",country:"USA",year:2004,date:"2004-10-27",value:633,company:"Disney"},{id:22,rank:6,rankChange:1,movietitle:"Zulu",director:"Cy Enfield",category:"Action",country:"UK",year:1964,date:"1964-01-22",value:8,company:"Paramount"},{id:23,rank:7,rankChange:1,movietitle:"Longest Day",director:"Various",category:"War",country:"USA",year:1962,date:"1962-10-23",value:50,company:"20th Century Fox"},{id:24,rank:8,rankChange:1,movietitle:"Battle of Britain",director:"Guy Hamilton",category:"War",country:"UK",year:1969,date:"1969-09-16",value:13,company:"United Artists"},{id:25,rank:9,rankChange:1,movietitle:"Ferris Buleller's Day Off",director:"John Hughes",category:"Comedy",country:"Global",year:1987,date:"1987-02-20",value:70,company:"Paramount"},{id:26,rank:10,rankChange:1,movietitle:"Ghostbusters",director:"Ivan Reitman",category:"Comedy",country:"USA",year:1984,date:"1984-06-07",value:295,company:"Columbia Pictures"}]},moviesFakeDataHelper={getMoviesCount:function(){return{moviesTotalCount:moviesListFakeData.moviesList.length}},getPageOfItems:function(e,t,a){var r=t+a;return r>e.length&&(r=e.length-1),e.slice(t,r)},descCompare:function(e,t){var a=e.toLowerCase(),r=t.toLowerCase();return r<a?-1:r>a?1:0},ascCompare:function(e,t){var a=e.toLowerCase(),r=t.toLowerCase();return r>a?-1:r<a?1:0},descCompareMovieTitle:function(e,t){return moviesFakeDataHelper.descCompare(e.movietitle,t.movietitle)},ascCompareTitle:function(e,t){return moviesFakeDataHelper.ascCompare(e.movietitle,t.movietitle)},descCompareDirector:function(e,t){return moviesFakeDataHelper.descCompare(e.director,t.director)},ascCompareDirector:function(e,t){return moviesFakeDataHelper.ascCompare(e.director,t.director)},descCompareCategory:function(e,t){return moviesFakeDataHelper.descCompare(e.category,t.category)},ascCompareCategory:function(e,t){return moviesFakeDataHelper.ascCompare(e.category,t.category)},descCompareCompany:function(e,t){return moviesFakeDataHelper.descCompare(e.company,t.company)},ascCompareCompany:function(e,t){return moviesFakeDataHelper.ascCompare(e.company,t.company)},sortFakeListData:function(e,t){var a=e.sortName,r=e.sortMode;if(""!==a&&""!==r)return"id"===a?"desc"==r?t.sort(function(e,t){return t.id-e.id}):t.sort(function(e,t){return e.id-t.id}):"rank"===a?"desc"==r?t.sort(function(e,t){return t.rank-e.rank}):t.sort(function(e,t){return e.rank-t.rank}):"value"===a?"desc"==r?t.sort(function(e,t){return t.value-e.value}):t.sort(function(e,t){return e.value-t.value}):"year"===a?"desc"==r?t.sort(function(e,t){return t.year-e.year}):t.sort(function(e,t){return e.year-t.year}):"movietitle"===a?"desc"==r?t.sort(this.descCompareMovieTitle):t.sort(this.ascCompareMovieTitle):"director"===a?"desc"==r?t.sort(this.descCompareDirector):t.sort(this.ascCompareDirector):"category"===a?"desc"==r?t.sort(this.descCompareCategory):t.sort(this.ascCompareCategory):"company"===a?"desc"==r?t.sort(this.descCompareCompany):t.sort(this.ascCompareCompany):void 0},getMoviesFakeData:function(e){var t=moviesListFakeData.moviesList.slice();return this.sortFakeListData(e,t),t=this.getPageOfItems(t,e.listStart,e.itemsCount),{title:moviesListFakeData.title,moviesList:t}}};app.factory("moviesDataService",["$resource","$q","serviceUris",function(e,t,a){"use strict";return{fakePromise:function(e){var a=t.defer();return a.resolve(e),a.promise},getMoviesTotalCount:function(){return-1!==a.moviesDataServiceUrl.indexOf("fake-service")?this.fakePromise(moviesFakeDataHelper.getMoviesCount()):e(a.moviesDataServiceUrl+"/count").get().$promise},getMoviesListData:function(t){return-1!==a.moviesDataServiceUrl.indexOf("fake-service")?this.fakePromise(moviesFakeDataHelper.getMoviesFakeData(t)):e(a.moviesDataServiceUrl+"/list").get().$promise}}}]);